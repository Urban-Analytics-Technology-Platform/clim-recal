---
title: "UKCP 2.2 Temporal Interpolation"
format:
  html:
    code-fold: true
execute:
  cache: true
jupyter: python3
---

To align climate projections with measured records, we interpolate five or six extra time points---standard or leap years respectively---per year.

```{python}
#| label: fig-time-series
#| fig-cap: "Raw CPM projection 360 day years"

from typing import Final
from pathlib import Path

# from xarray.typing import T_Dataset

from clim_recal.utils.xarray import (
    annual_group_xr_time_series,
    join_xr_time_series_var,
    plot_xarray,
)
from clim_recal.utils.core import climate_data_mount_path
# import numpy as np
# import matplotlib.pyplot as plt

raw_tasmax_run_01: Final[Path] = climate_data_mount_path() / 'Raw/UKCP2.2/tasmax/01/latest'
variable_name, plot_path = "tasmax", "./assets"
cpm_annual_ts: T_Dataset = join_xr_time_series_var(raw_tasmax_run_01, variable_name)
```

With the CPM annual timeseries loaded, we can now plot:
```{python}
plot_xarray(
    getattr(cpm_annual_ts, variable_name),
    path=plot_path,
    time_stamp=True,
)
```

New cell
```{python}
annual_group_xr_time_series(cpm_annual_ts, variable_name=variable_name)
```
